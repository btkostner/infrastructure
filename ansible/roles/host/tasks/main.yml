---

- name: Configure hostname
  ansible.builtin.hostname:
    name: "{{ inventory_hostname | regex_replace('\\.', '-') }}"
  become: true
  tags:
    - host
    - provision

- name: Swapoff
  ansible.builtin.command:
    argv:
      - /usr/sbin/swapoff
      - -a
  changed_when: false
  become: true
  tags:
    - host
    - provision

- name: Unmount "/swap.img"
  mount:
    path: /swap.img
    state: absent
  become: true
  tags:
    - host
    - provision

- name: Destroy "/swap.img"
  ansible.builtin.file:
    path: /swap.img
    state: absent
  become: true
  tags:
    - host
    - provision
